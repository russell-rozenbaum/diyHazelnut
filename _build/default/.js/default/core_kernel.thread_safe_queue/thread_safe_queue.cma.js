// Generated by js_of_ocaml
//# buildInfo:effects=false, kind=cma, use-js-string=true, version=5.8.1+5.8.1

//# unitInfo: Provides: Thread_safe_queue__
(function
  (globalThis){
   "use strict";
   var runtime = globalThis.jsoo_runtime, Thread_safe_queue = [0];
   runtime.caml_register_global(0, Thread_safe_queue, "Thread_safe_queue__");
   return;
  }
  (globalThis));

//# unitInfo: Provides: Thread_safe_queue__Import
//# unitInfo: Requires: Expect_test_collector, Ppx_bench_lib__Benchmark_accumulator, Ppx_inline_test_lib__Runtime, Ppx_module_timer_runtime
(function
  (globalThis){
   "use strict";
   var
    runtime = globalThis.jsoo_runtime,
    cst_Thread_safe_queue_Import = "Thread_safe_queue__Import",
    cst_thread_safe_queue = "thread_safe_queue";
   function caml_call1(f, a0){
    return (f.l >= 0 ? f.l : f.l = f.length) == 1
            ? f(a0)
            : runtime.caml_call_gen(f, [a0]);
   }
   function caml_call2(f, a0, a1){
    return (f.l >= 0 ? f.l : f.l = f.length) == 2
            ? f(a0, a1)
            : runtime.caml_call_gen(f, [a0, a1]);
   }
   var
    global_data = runtime.caml_get_global_data(),
    cst = "",
    Ppx_module_timer_runtime = global_data.Ppx_module_timer_runtime,
    Ppx_bench_lib_Benchmark_accumu =
      global_data.Ppx_bench_lib__Benchmark_accumulator,
    Expect_test_collector = global_data.Expect_test_collector,
    Ppx_inline_test_lib_Runtime = global_data.Ppx_inline_test_lib__Runtime;
   caml_call1(Ppx_module_timer_runtime[4], cst_Thread_safe_queue_Import);
   caml_call1(Ppx_bench_lib_Benchmark_accumu[1][1], cst_thread_safe_queue);
   caml_call1(Expect_test_collector[5][1], "thread_safe_queue/src/import.ml");
   caml_call2(Ppx_inline_test_lib_Runtime[2], cst_thread_safe_queue, cst);
   caml_call1(Ppx_inline_test_lib_Runtime[3], cst_thread_safe_queue);
   caml_call1(Expect_test_collector[5][2], 0);
   caml_call1(Ppx_bench_lib_Benchmark_accumu[1][2], 0);
   caml_call1(Ppx_module_timer_runtime[5], cst_Thread_safe_queue_Import);
   var Thread_safe_queue_Import = [0];
   runtime.caml_register_global
    (11, Thread_safe_queue_Import, cst_Thread_safe_queue_Import);
   return;
  }
  (globalThis));

//# unitInfo: Provides: Thread_safe_queue
//# unitInfo: Requires: Assert_failure, Base__Field, Base__Invariant, Core, Expect_test_collector, Ppx_bench_lib__Benchmark_accumulator, Ppx_inline_test_lib__Runtime, Ppx_module_timer_runtime, Sexplib0__Sexp_conv, Uopt
(function
  (globalThis){
   "use strict";
   var
    runtime = globalThis.jsoo_runtime,
    cst_Thread_safe_queue = "Thread_safe_queue",
    cst$0 = "_",
    cst_back = "back",
    cst_front = "front",
    cst_length = "length",
    cst_thread_safe_queue = "thread_safe_queue",
    cst_thread_safe_queue_src_thre =
      "thread_safe_queue/src/thread_safe_queue.ml",
    cst_unused_elts = "unused_elts",
    caml_maybe_attach_backtrace = runtime.caml_maybe_attach_backtrace;
   function caml_call1(f, a0){
    return (f.l >= 0 ? f.l : f.l = f.length) == 1
            ? f(a0)
            : runtime.caml_call_gen(f, [a0]);
   }
   function caml_call2(f, a0, a1){
    return (f.l >= 0 ? f.l : f.l = f.length) == 2
            ? f(a0, a1)
            : runtime.caml_call_gen(f, [a0, a1]);
   }
   function caml_call4(f, a0, a1, a2, a3){
    return (f.l >= 0 ? f.l : f.l = f.length) == 4
            ? f(a0, a1, a2, a3)
            : runtime.caml_call_gen(f, [a0, a1, a2, a3]);
   }
   function caml_call5(f, a0, a1, a2, a3, a4){
    return (f.l >= 0 ? f.l : f.l = f.length) == 5
            ? f(a0, a1, a2, a3, a4)
            : runtime.caml_call_gen(f, [a0, a1, a2, a3, a4]);
   }
   var
    global_data = runtime.caml_get_global_data(),
    cst = "",
    Uopt = global_data.Uopt,
    Core = global_data.Core,
    Assert_failure = global_data.Assert_failure,
    Base_Invariant = global_data.Base__Invariant;
   global_data.Base__Field;
   var
    Sexplib0_Sexp_conv = global_data.Sexplib0__Sexp_conv,
    Ppx_module_timer_runtime = global_data.Ppx_module_timer_runtime,
    Ppx_bench_lib_Benchmark_accumu =
      global_data.Ppx_bench_lib__Benchmark_accumulator,
    Expect_test_collector = global_data.Expect_test_collector,
    Ppx_inline_test_lib_Runtime = global_data.Ppx_inline_test_lib__Runtime;
   caml_call1(Ppx_module_timer_runtime[4], cst_Thread_safe_queue);
   caml_call1(Ppx_bench_lib_Benchmark_accumu[1][1], cst_thread_safe_queue);
   caml_call1(Expect_test_collector[5][1], cst_thread_safe_queue_src_thre);
   caml_call2(Ppx_inline_test_lib_Runtime[2], cst_thread_safe_queue, cst);
   var _a_ = [0, "next"], _b_ = [0, "value"];
   function sexp_of_t(of_a_001, param){
    var
     value_003 = param[1],
     next_005 = param[2],
     arg_006 = caml_call1(Sexplib0_Sexp_conv[23], next_005),
     bnds_002 = [0, [1, [0, _a_, [0, arg_006, 0]]], 0],
     arg_004 = caml_call2(Uopt[1], of_a_001, value_003),
     bnds_002$0 = [0, [1, [0, _b_, [0, arg_004, 0]]], bnds_002];
    return [1, bnds_002$0];
   }
   function create(param){return [0, Uopt[3], Uopt[3]];}
   function unused_elts(r){return r[4];}
   function set_unused_elts(r, v){r[4] = v; return 0;}
   function back(r){return r[3];}
   function set_back(r, v){r[3] = v; return 0;}
   function front(r){return r[2];}
   function set_front(r, v){r[2] = v; return 0;}
   function length(r){return r[1];}
   function set_length(r, v){r[1] = v; return 0;}
   var
    unused_elts$0 =
      [0,
       function(param){return 0;},
       cst_unused_elts,
       [0, set_unused_elts],
       unused_elts,
       function(r, v){return [0, r[1], r[2], r[3], v];}],
    back$0 =
      [0,
       function(param){return 0;},
       cst_back,
       [0, set_back],
       back,
       function(r, v){return [0, r[1], r[2], v, r[4]];}],
    front$0 =
      [0,
       function(param){return 0;},
       cst_front,
       [0, set_front],
       front,
       function(r, v){return [0, r[1], v, r[3], r[4]];}],
    length$0 =
      [0,
       function(param){return 0;},
       cst_length,
       [0, set_length],
       length,
       function(r, v){return [0, v, r[2], r[3], r[4]];}],
    _c_ = [0, cst_unused_elts],
    _d_ = [0, cst_back],
    _e_ = [0, cst_front],
    _f_ = [0, cst_length],
    _g_ = [0, cst_thread_safe_queue_src_thre, 62, 13],
    _h_ = [0, cst_thread_safe_queue_src_thre, 55, 32],
    _i_ = [0, cst_thread_safe_queue_src_thre, 52, 13],
    _j_ = [0, cst_thread_safe_queue_src_thre, 54, 11],
    _k_ = [0, cst_thread_safe_queue_src_thre, 43, 36],
    _l_ = [0, cst$0],
    _m_ = [0, cst_thread_safe_queue_src_thre, 40, 1533, 1555],
    _n_ = [0, cst$0],
    cst_Thread_safe_queue_dequeue_ =
      "Thread_safe_queue.dequeue_exn of empty queue",
    _o_ = [0, cst_thread_safe_queue_src_thre, 102, 3230, 3248];
   function sexp_of_t$0(of_a_007, param){
    var
     length_009 = param[1],
     front_011 = param[2],
     back_013 = param[3],
     unused_elts_015 = param[4],
     arg_016 =
       caml_call2
        (Uopt[1],
         function(_r_){return sexp_of_t(of_a_007, _r_);},
         unused_elts_015),
     bnds_008 = [0, [1, [0, _c_, [0, arg_016, 0]]], 0],
     arg_014 = sexp_of_t(of_a_007, back_013),
     bnds_008$0 = [0, [1, [0, _d_, [0, arg_014, 0]]], bnds_008],
     arg_012 = sexp_of_t(of_a_007, front_011),
     bnds_008$1 = [0, [1, [0, _e_, [0, arg_012, 0]]], bnds_008$0],
     arg_010 = caml_call1(Core[356], length_009),
     bnds_008$2 = [0, [1, [0, _f_, [0, arg_010, 0]]], bnds_008$1];
    return [1, bnds_008$2];
   }
   function invariant(invariant_a, t){
    return caml_call4
            (Base_Invariant[1],
             _m_,
             t,
             function(x_017){
              return sexp_of_t$0(function(param){return _l_;}, x_017);
             },
             function(param){
              function check(f){return caml_call2(Base_Invariant[2], t, f);}
              var
               unused_elts_fun =
                 check
                  (function(unused_elts){
                    var r = [0, unused_elts];
                    for(;;){
                     if(! caml_call1(Uopt[6], r[1])) return 0;
                     var elt = caml_call1(Uopt[7], r[1]);
                     r[1] = elt[2];
                     if(! caml_call1(Uopt[5], elt[1]))
                      throw caml_maybe_attach_backtrace
                             ([0, Assert_failure, _g_], 1);
                    }
                   }),
               back_fun =
                 check
                  (function(back){
                    if(caml_call1(Uopt[5], back[1])) return 0;
                    throw caml_maybe_attach_backtrace
                           ([0, Assert_failure, _h_], 1);
                   }),
               front_fun =
                 check
                  (function(front){
                    var i = [0, t[1]], r = [0, front];
                    for(;;){
                     if(! caml_call2(Core[91], i[1], 0)){
                      if(caml_call2(Core[246], r[1], t[3])) return 0;
                      throw caml_maybe_attach_backtrace
                             ([0, Assert_failure, _j_], 1);
                     }
                     i[1]--;
                     var elt = r[1];
                     r[1] = caml_call1(Uopt[7], elt[2]);
                     if(! caml_call1(Uopt[6], elt[1]))
                      throw caml_maybe_attach_backtrace
                             ([0, Assert_failure, _i_], 1);
                    }
                   }),
               length_fun =
                 check
                  (function(length){
                    if(caml_call2(Core[88], length, 0)) return 0;
                    throw caml_maybe_attach_backtrace
                           ([0, Assert_failure, _k_], 1);
                   });
              caml_call1(length_fun, length$0);
              caml_call1(front_fun, front$0);
              caml_call1(back_fun, back$0);
              return caml_call1(unused_elts_fun, unused_elts$0);
             });
   }
   function create$0(param){
    var elt = create(0);
    return [0, 0, elt, elt, Uopt[3]];
   }
   function enqueue(t, a){
    if(caml_call1(Uopt[6], t[4])){
     var elt = caml_call1(Uopt[8], t[4]);
     t[4] = elt[2];
     var new_back = elt;
    }
    else
     var new_back = create(0);
    t[1] = t[1] + 1 | 0;
    var _p_ = caml_call1(Uopt[4], a);
    t[3][1] = _p_;
    var _q_ = caml_call1(Uopt[4], new_back);
    t[3][2] = _q_;
    t[3] = new_back;
    return 0;
   }
   function dequeue_exn(t){
    if(caml_call2(Core[90], t[1], 0))
     caml_call5
      (Core[236],
       0,
       _o_,
       cst_Thread_safe_queue_dequeue_,
       t,
       function(x_018){
        return sexp_of_t$0(function(param){return _n_;}, x_018);
       });
    var elt = t[2], a = elt[1];
    t[2] = caml_call1(Uopt[8], elt[2]);
    t[1] = t[1] - 1 | 0;
    elt[1] = Uopt[3];
    elt[2] = t[4];
    t[4] = caml_call1(Uopt[4], elt);
    return caml_call1(Uopt[8], a);
   }
   function clear_internal_pool(t){t[4] = Uopt[3]; return 0;}
   caml_call1(Ppx_inline_test_lib_Runtime[3], cst_thread_safe_queue);
   caml_call1(Expect_test_collector[5][2], 0);
   caml_call1(Ppx_bench_lib_Benchmark_accumu[1][2], 0);
   caml_call1(Ppx_module_timer_runtime[5], cst_Thread_safe_queue);
   var
    Thread_safe_queue =
      [0,
       sexp_of_t$0,
       invariant,
       create$0,
       length,
       enqueue,
       dequeue_exn,
       clear_internal_pool,
       [0, [0, Uopt[1], Uopt[3], Uopt[4], Uopt[5], Uopt[6]]]];
   runtime.caml_register_global(38, Thread_safe_queue, cst_Thread_safe_queue);
   return;
  }
  (globalThis));

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLjAsImZpbGUiOiJ0aHJlYWRfc2FmZV9xdWV1ZS5jbWEuanMiLCJzb3VyY2VSb290IjoiIiwibmFtZXMiOlsic2V4cF9vZl90Iiwib2ZfYV8wMDEiLCJ2YWx1ZV8wMDMiLCJuZXh0XzAwNSIsImFyZ18wMDYiLCJibmRzXzAwMiIsImFyZ18wMDQiLCJibmRzXzAwMiQwIiwiY3JlYXRlIiwidW51c2VkX2VsdHMiLCJyIiwic2V0X3VudXNlZF9lbHRzIiwidiIsImJhY2siLCJzZXRfYmFjayIsImZyb250Iiwic2V0X2Zyb250IiwibGVuZ3RoIiwic2V0X2xlbmd0aCIsInVudXNlZF9lbHRzJDAiLCJiYWNrJDAiLCJmcm9udCQwIiwibGVuZ3RoJDAiLCJzZXhwX29mX3QkMCIsIm9mX2FfMDA3IiwibGVuZ3RoXzAwOSIsImZyb250XzAxMSIsImJhY2tfMDEzIiwidW51c2VkX2VsdHNfMDE1IiwiYXJnXzAxNiIsImJuZHNfMDA4IiwiYXJnXzAxNCIsImJuZHNfMDA4JDAiLCJhcmdfMDEyIiwiYm5kc18wMDgkMSIsImFyZ18wMTAiLCJibmRzXzAwOCQyIiwiaW52YXJpYW50IiwiaW52YXJpYW50X2EiLCJ0IiwieF8wMTciLCJjaGVjayIsImYiLCJ1bnVzZWRfZWx0c19mdW4iLCJlbHQiLCJiYWNrX2Z1biIsImZyb250X2Z1biIsImkiLCJsZW5ndGhfZnVuIiwiY3JlYXRlJDAiLCJlbnF1ZXVlIiwiYSIsIm5ld19iYWNrIiwiZGVxdWV1ZV9leG4iLCJ4XzAxOCIsImNsZWFyX2ludGVybmFsX3Bvb2wiXSwic291cmNlcyI6WyIvVXNlcnMvcnVzc2VsbHJvemVuYmF1bS8ub3BhbS9kaXktaGF6ZWxudXQvbGliL2NvcmVfa2VybmVsL3RocmVhZF9zYWZlX3F1ZXVlL3RocmVhZF9zYWZlX3F1ZXVlLm1sIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0U7Ozs7Ozs7Ozs7OztHOzs7OztHOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0U7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0c7Ozs7O0c7Ozs7O0c7Ozs7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QVBFUjs7O1NBT0ZRLFdBMURBNUM7SUF5RGdCK0IsT0FBQUE7SUFJSixVQUFBLG9CQUpjWTtJQUFWWjtJQUtMLFVBQUEsb0JBSlhhO0lBRGdCYjtJQUFBQSxPQUNoQmE7O0dBS2M7WUFrQmhCQyxZQUFZZDtJQUVkLEdBQUcscUJBRldBOzs7Ozs7T0FBQUE7Z0JBSHNFZTtRLE9BM0V0Ri9CLDRCLGNBMkVzRitCOztJQU9wRixJQWpCdUJWLE1BYVRMLE1BSVZZLElBakJtQlA7SUFhVEwsT0FLSCxvQkFsQllLO0lBYVRMLE9BQUFBO0lBYlNLO0lBQUFBLFNBYVRMO0lBQUFBLE9BVEcsb0JBSk1LO0lBcUJ2QixPQUFBLG9CQUpJTztHQUtlO1lBR2pCSSxvQkFBb0JoQixHQUFBQSx5QkFBOEI7Ozs7Ozs7O09BMUZ0RGhCO09BWUljO09BMkJBWTtPQXRDUWhDO09BcURSaUM7T0F3QkFHO09BWUFFOzs7O0UiLCJzb3VyY2VzQ29udGVudCI6WyIoKiBUaGlzIG1vZHVsZSBleHBsb2l0cyB0aGUgZmFjdCB0aGF0IE9DYW1sIGRvZXMgbm90IHBlcmZvcm0gY29udGV4dC1zd2l0Y2hlcyB1bmRlclxuICAgY2VydGFpbiBjb25kaXRpb25zLiAgSXQgY2FuIHRoZXJlZm9yZSBhdm9pZCB1c2luZyBtdXRleGVzLlxuXG4gICBHaXZlbiB0aGUgc2VtYW50aWNzIG9mIHRoZSBjdXJyZW50IE9DYW1sIHJ1bnRpbWUgKGFuZCBmb3IgdGhlIGZvcmVzZWVhYmxlIGZ1dHVyZSksIGNvZGVcbiAgIHNlY3Rpb25zIGRvY3VtZW50ZWQgYXMgYXRvbWljIGJlbG93IHdpbGwgbmV2ZXIgY29udGFpbiBhIGNvbnRleHQtc3dpdGNoLiAgVGhlIGRlY2lkaW5nXG4gICBjcml0ZXJpb24gaXMgd2hldGhlciB0aGV5IGNvbnRhaW4gYWxsb2NhdGlvbnMgb3IgY2FsbHMgdG8gZXh0ZXJuYWwvYnVpbHRpbiBmdW5jdGlvbnMuXG4gICBJZiB0aGVyZSBpcyBub25lLCBhIGNvbnRleHQtc3dpdGNoIGNhbm5vdCBoYXBwZW4uICBBc3NpZ25tZW50cyB3aXRob3V0IGFsbG9jYXRpb25zLFxuICAgZmllbGQgYWNjZXNzLCBwYXR0ZXJuLW1hdGNoaW5nLCBldGMuLCBkbyBub3QgdHJpZ2dlciBjb250ZXh0LXN3aXRjaGVzLlxuXG4gICBDb2RlIHJldmlld2VycyBzaG91bGQgdGhlcmVmb3JlIG1ha2Ugc3VyZSB0aGF0IHRoZSBzZWN0aW9ucyBkb2N1bWVudGVkIGFzIGF0b21pYyBiZWxvd1xuICAgZG8gbm90IHZpb2xhdGUgdGhlIGFib3ZlIGFzc3VtcHRpb25zLiAgSXQgaXMgcHJ1ZGVudCB0byBkaXNhc3NlbWJsZSB0aGUgLm8gZmlsZSAodXNpbmdcbiAgIFtvYmpkdW1wIC1kcl0pIGFuZCBleGFtaW5lIGl0LiAqKVxuXG5vcGVuISBDb3JlXG5vcGVuISBJbXBvcnRcblxubW9kdWxlIEVsdCA9IHN0cnVjdFxuICB0eXBlICdhIHQgPVxuICAgIHsgbXV0YWJsZSB2YWx1ZSA6ICdhIFVvcHQudFxuICAgIDsgbXV0YWJsZSBuZXh0IDogKCdhIHQgVW9wdC50W0BzZXhwLm9wYXF1ZV0pXG4gICAgfVxuICBbQEBkZXJpdmluZyBzZXhwX29mXVxuXG4gIGxldCBjcmVhdGUgKCkgPSB7IHZhbHVlID0gVW9wdC5ub25lOyBuZXh0ID0gVW9wdC5ub25lIH1cbmVuZFxuXG50eXBlICdhIHQgPVxuICB7IG11dGFibGUgbGVuZ3RoIDogaW50XG4gICgqIFtmcm9udF0gdG8gW2JhY2tdIGhhcyBbbGVuZ3RoICsgMV0gbGlua2VkIGVsZW1lbnRzLCB3aGVyZSB0aGUgZmlyc3QgW2xlbmd0aF0gaG9sZCB0aGVcbiAgICAgdmFsdWVzIGluIHRoZSBxdWV1ZSwgYW5kIHRoZSBsYXN0IGlzIFtiYWNrXSwgaG9sZGluZyBubyB2YWx1ZS4gKilcbiAgOyBtdXRhYmxlIGZyb250IDogJ2EgRWx0LnRcbiAgOyBtdXRhYmxlIGJhY2sgOiAnYSBFbHQudFxuICAoKiBbdW51c2VkX2VsdHNdIGlzIHNpbmdseSBsaW5rZWQgdmlhIFtuZXh0XSwgYW5kIGVuZHMgd2l0aCBbc2VudGluZWxdLiAgQWxsIGVsdHMgaW5cbiAgICAgW3VudXNlZF9lbHRzXSBoYXZlIFtVb3B0LmlzX25vbmUgZWx0LnZhbHVlXS4gKilcbiAgOyBtdXRhYmxlIHVudXNlZF9lbHRzIDogJ2EgRWx0LnQgVW9wdC50XG4gIH1cbltAQGRlcml2aW5nIGZpZWxkcywgc2V4cF9vZl1cblxubGV0IGludmFyaWFudCBfaW52YXJpYW50X2EgdCA9XG4gIEludmFyaWFudC5pbnZhcmlhbnQgWyVoZXJlXSB0IFslc2V4cF9vZjogXyB0XSAoZnVuICgpIC0+XG4gICAgbGV0IGNoZWNrIGYgPSBJbnZhcmlhbnQuY2hlY2tfZmllbGQgdCBmIGluXG4gICAgRmllbGRzLml0ZXJcbiAgICAgIH5sZW5ndGg6KGNoZWNrIChmdW4gbGVuZ3RoIC0+IGFzc2VydCAobGVuZ3RoID49IDApKSlcbiAgICAgIH5mcm9udDpcbiAgICAgICAgKGNoZWNrIChmdW4gZnJvbnQgLT5cbiAgICAgICAgICAgbGV0IGkgPSByZWYgdC5sZW5ndGggaW5cbiAgICAgICAgICAgbGV0IHIgPSByZWYgZnJvbnQgaW5cbiAgICAgICAgICAgd2hpbGUgIWkgPiAwIGRvXG4gICAgICAgICAgICAgZGVjciBpO1xuICAgICAgICAgICAgIGxldCBlbHQgPSAhciBpblxuICAgICAgICAgICAgIHIgOj0gVW9wdC52YWx1ZV9leG4gZWx0LkVsdC5uZXh0O1xuICAgICAgICAgICAgIGFzc2VydCAoVW9wdC5pc19zb21lIGVsdC52YWx1ZSlcbiAgICAgICAgICAgZG9uZTtcbiAgICAgICAgICAgYXNzZXJ0IChwaHlzX2VxdWFsICFyIHQuYmFjaykpKVxuICAgICAgfmJhY2s6KGNoZWNrIChmdW4gYmFjayAtPiBhc3NlcnQgKFVvcHQuaXNfbm9uZSBiYWNrLkVsdC52YWx1ZSkpKVxuICAgICAgfnVudXNlZF9lbHRzOlxuICAgICAgICAoY2hlY2sgKGZ1biB1bnVzZWRfZWx0cyAtPlxuICAgICAgICAgICBsZXQgciA9IHJlZiB1bnVzZWRfZWx0cyBpblxuICAgICAgICAgICB3aGlsZSBVb3B0LmlzX3NvbWUgIXIgZG9cbiAgICAgICAgICAgICBsZXQgZWx0ID0gVW9wdC52YWx1ZV9leG4gIXIgaW5cbiAgICAgICAgICAgICByIDo9IGVsdC5FbHQubmV4dDtcbiAgICAgICAgICAgICBhc3NlcnQgKFVvcHQuaXNfbm9uZSBlbHQudmFsdWUpXG4gICAgICAgICAgIGRvbmUpKSlcbjs7XG5cbmxldCBjcmVhdGUgKCkgPVxuICBsZXQgZWx0ID0gRWx0LmNyZWF0ZSAoKSBpblxuICB7IGZyb250ID0gZWx0OyBiYWNrID0gZWx0OyBsZW5ndGggPSAwOyB1bnVzZWRfZWx0cyA9IFVvcHQubm9uZSB9XG47O1xuXG5sZXQgZ2V0X3VudXNlZF9lbHQgdCA9XG4gICgqIEJFR0lOIEFUT01JQyBTRUNUSU9OICopXG4gIGlmIFVvcHQuaXNfc29tZSB0LnVudXNlZF9lbHRzXG4gIHRoZW4gKFxuICAgIGxldCBlbHQgPSBVb3B0LnVuc2FmZV92YWx1ZSB0LnVudXNlZF9lbHRzIGluXG4gICAgdC51bnVzZWRfZWx0cyA8LSBlbHQubmV4dDtcbiAgICBlbHQgKCogRU5EIEFUT01JQyBTRUNUSU9OICopKVxuICBlbHNlIEVsdC5jcmVhdGUgKClcbjs7XG5cbmxldCBlbnF1ZXVlICh0eXBlIGEpICh0IDogYSB0KSAoYSA6IGEpID1cbiAgbGV0IG5ld19iYWNrID0gZ2V0X3VudXNlZF9lbHQgdCBpblxuICAoKiBCRUdJTiBBVE9NSUMgU0VDVElPTiAqKVxuICB0Lmxlbmd0aCA8LSB0Lmxlbmd0aCArIDE7XG4gIHQuYmFjay52YWx1ZSA8LSBVb3B0LnNvbWUgYTtcbiAgdC5iYWNrLm5leHQgPC0gVW9wdC5zb21lIG5ld19iYWNrO1xuICB0LmJhY2sgPC0gbmV3X2JhY2tcbjs7XG5cbigqIEVORCBBVE9NSUMgU0VDVElPTiAqKVxuXG5sZXQgcmV0dXJuX3VudXNlZF9lbHQgdCAoZWx0IDogXyBFbHQudCkgPVxuICAoKiBCRUdJTiBBVE9NSUMgU0VDVElPTiAqKVxuICBlbHQudmFsdWUgPC0gVW9wdC5ub25lO1xuICBlbHQubmV4dCA8LSB0LnVudXNlZF9lbHRzO1xuICB0LnVudXNlZF9lbHRzIDwtIFVvcHQuc29tZSBlbHQ7XG4gICgqIEVORCBBVE9NSUMgU0VDVElPTiAqKVxuICAoKVxuOztcblxubGV0W0Bjb2xkXSByYWlzZV9kZXF1ZXVlX2VtcHR5IHQgPVxuICBmYWlsd2l0aHMgfmhlcmU6WyVoZXJlXSBcIlRocmVhZF9zYWZlX3F1ZXVlLmRlcXVldWVfZXhuIG9mIGVtcHR5IHF1ZXVlXCIgdCBbJXNleHBfb2Y6IF8gdF1cbjs7XG5cbmxldCBkZXF1ZXVlX2V4biB0ID1cbiAgKCogQkVHSU4gQVRPTUlDIFNFQ1RJT04gKilcbiAgaWYgdC5sZW5ndGggPSAwIHRoZW4gcmFpc2VfZGVxdWV1ZV9lbXB0eSB0O1xuICBsZXQgZWx0ID0gdC5mcm9udCBpblxuICBsZXQgYSA9IGVsdC52YWx1ZSBpblxuICB0LmZyb250IDwtIFVvcHQudW5zYWZlX3ZhbHVlIGVsdC5uZXh0O1xuICB0Lmxlbmd0aCA8LSB0Lmxlbmd0aCAtIDE7XG4gICgqIEVORCBBVE9NSUMgU0VDVElPTiAqKVxuICByZXR1cm5fdW51c2VkX2VsdCB0IGVsdDtcbiAgVW9wdC51bnNhZmVfdmFsdWUgYVxuOztcblxubGV0IGNsZWFyX2ludGVybmFsX3Bvb2wgdCA9IHQudW51c2VkX2VsdHMgPC0gVW9wdC5ub25lXG5cbm1vZHVsZSBQcml2YXRlID0gc3RydWN0XG4gIG1vZHVsZSBVb3B0ID0gVW9wdFxuZW5kXG4iXX0=
